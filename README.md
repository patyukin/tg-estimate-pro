# üèóÔ∏è –¢–µ–ª–µ–≥—Ä–∞–º –ë–æ—Ç-–°–º–µ—Ç—á–∏–∫

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–º–µ—Ç–∞–º–∏ —Ä–∞–±–æ—Ç/—É—Å–ª—É–≥ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–º–µ—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Ä–∞–±–æ—Ç/—É—Å–ª—É–≥ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º:
  - –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã/—É—Å–ª—É–≥–∏
  - –í—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ —á–∞—Å–∞—Ö)
  - –°—Ç–æ–∏–º–æ—Å—Ç–∏ (–≤ —Ä—É–±–ª—è—Ö)
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–º–µ—Ç –∏ –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–º–µ—Ç –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Å–º–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤ (–æ–±—â–µ–µ –≤—Ä–µ–º—è, —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω—è—è —Å—Ç–∞–≤–∫–∞)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∏ PDF —Ñ–æ—Ä–º–∞—Ç–µ
- ü§ñ **–ò–ò-–ø–æ–º–æ—â–Ω–∏–∫** (–Ω–æ–≤–æ–µ!):
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
  - –£–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–º–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
  - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞–±–æ—Ç
  - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository_url>
cd estimate-pro
```

2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —É [@BotFather](https://t.me/BotFather) –≤ –¢–µ–ª–µ–≥—Ä–∞–º–µ

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
make setup
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É–∫–∞–∂–∏—Ç–µ BOT_TOKEN
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ Docker:
```bash
make dev
# –∏–ª–∏
make build && make up
```

### üêç –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:
```bash
cp env.example .env
```

4. –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
```env
BOT_TOKEN=your_bot_token_here
DATABASE_URL=postgresql://bot_user:bot_password@localhost:5432/estimates_db
LOG_LEVEL=INFO

# –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
GIGACHAT_CREDENTIALS=your_gigachat_credentials_here
GIGACHAT_MODEL=GigaChat
GIGACHAT_SCOPE=GIGACHAT_API_PERS
AI_ENABLED=true
```

## üîß –ó–∞–ø—É—Å–∫

### Docker
```bash
make up          # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs        # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make down        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
make help        # –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```

### –õ–æ–∫–∞–ª—å–Ω–æ
```bash
python bot.py
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å–º–µ—Ç—É —á–µ—Ä–µ–∑ "üìù –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–º–µ—Ç—É"
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞–±–æ—Ç –≤ —Å–º–µ—Ç—É
4. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–º–µ—Ç—ã —á–µ—Ä–µ–∑ "üìã –ú–æ–∏ —Å–º–µ—Ç—ã"
5. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –æ—Ç—á–µ—Ç—ã –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

### ü§ñ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ—Ç:**
1. –ù–∞–∂–º–∏—Ç–µ "ü§ñ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫" ‚Üí "üîÆ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ—Ç—É"
2. –ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–µ–∫—Ç–∞ (–≤–µ–±-—Å–∞–π—Ç, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, etc.)
4. –ò–ò —Å–æ–∑–¥–∞—Å—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å–º–µ—Ç—É —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ —Ü–µ–Ω–∞–º–∏

**–ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–º–µ—Ç:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±—É—é —Å–º–µ—Ç—É
2. –ù–∞–∂–º–∏—Ç–µ "ü§ñ –ò–ò-–∞–Ω–∞–ª–∏–∑"
3. –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏:**
1. –ù–∞–∂–º–∏—Ç–µ "ü§ñ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫" ‚Üí "üß† –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
2. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ –ø—Ä–æ–µ–∫—Ç–µ –∏–ª–∏ —Å–º–µ—Ç–µ
3. –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
estimate-pro/
‚îú‚îÄ‚îÄ bot.py                  # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ config.py               # –ö–ª–∞—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îú‚îÄ‚îÄ database.py             # –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö PostgreSQL
‚îú‚îÄ‚îÄ report_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ (PDF/—Ç–µ–∫—Å—Ç)
‚îú‚îÄ‚îÄ ai_assistant.py         # –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–º–µ—Ç –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
‚îú‚îÄ‚îÄ test_ai.py              # –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–ò-—Ñ—É–Ω–∫—Ü–∏–π
‚îú‚îÄ‚îÄ ai_check.py             # –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑ –¥–ª—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ docker-compose.yml      # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ init.d/                 # –°–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ 001-create-schema.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002-create-tables.sql
‚îÇ   ‚îú‚îÄ‚îÄ 003-create-indexes.sql
‚îÇ   ‚îú‚îÄ‚îÄ 004-create-functions.sql
‚îÇ   ‚îî‚îÄ‚îÄ 005-create-permissions.sql
‚îú‚îÄ‚îÄ Makefile                # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker
‚îú‚îÄ‚îÄ .dockerignore           # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ env.example             # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ AI_TESTING_GUIDE.md     # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ò–ò-—Ñ—É–Ω–∫—Ü–∏–π
‚îú‚îÄ‚îÄ GIGACHAT_SETUP.md       # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ GigaChat
‚îú‚îÄ‚îÄ GIGACHAT_MIGRATION.md   # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å OpenAI
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL:

- –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã –≤ `init.d/`
- –ò–Ω–¥–µ–∫—Å—ã, —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
  - `001-create-schema.sql` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã
  - `002-create-tables.sql` - —Ç–∞–±–ª–∏—Ü—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
  - `004-create-functions.sql` - —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã
  - `005-create-permissions.sql` - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î:**
- `estimates` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–º–µ—Ç–∞—Ö
- `estimate_items` - –ø–æ–∑–∏—Ü–∏–∏ –≤ —Å–º–µ—Ç–∞—Ö

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ë–æ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `.env`:

- `BOT_TOKEN` - **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π** —Ç–æ–∫–µ–Ω —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞
- `DATABASE_URL` - URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
  - –§–æ—Ä–º–∞—Ç: `postgresql://user:password@host:port/database`
- `LOG_LEVEL` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`DEBUG`, `INFO`, `WARNING`, `ERROR`)

### ü§ñ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `GIGACHAT_CREDENTIALS` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è GigaChat API
- `GIGACHAT_MODEL` - –º–æ–¥–µ–ª—å GigaChat (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `GigaChat`)
- `GIGACHAT_SCOPE` - –æ–±–ª–∞—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `GIGACHAT_API_PERS`)
- `AI_ENABLED` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ò–ò —Ñ—É–Ω–∫—Ü–∏–∏ (`true`/`false`)

**–ü–æ–ª—É—á–µ–Ω–∏–µ GigaChat API –¥–æ—Å—Ç—É–ø–∞:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [developers.sber.ru](https://developers.sber.ru)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ–ª—É—á–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –î–æ–±–∞–≤—å—Ç–µ credentials –≤ `.env` —Ñ–∞–π–ª

## üê≥ Docker —Å–µ—Ä–≤–∏—Å—ã

–í docker-compose –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

### ü§ñ bot
- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏–∑ Dockerfile
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å
- –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏

### üóÑÔ∏è postgres
- PostgreSQL 15 –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- Persistent storage —á–µ—Ä–µ–∑ Docker volumes
- Health checks –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã

### ‚ö° redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- Persist –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ append-only —Ñ–∞–π–ª

## üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –æ—Ç—á–µ—Ç–æ–≤:
- **–¢–µ–∫—Å—Ç–æ–≤—ã–π** - –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–º–µ—Ç–µ
- **PDF** - –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π PDF –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ò–ò-—Ñ—É–Ω–∫—Ü–∏–π

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞
python ai_check.py
```

### –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
python test_ai.py

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f ai_test.log
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã –ò–ò
```bash
# –õ–æ–≥–∏ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞ –≤ –±–æ—Ç–µ
tail -f bot.log | grep -E "(ai_assistant|ü§ñ|üîÆ|üß†|üí°|üéØ)"

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –ò–ò
tail -f bot.log | grep -E "(ERROR.*ai_assistant|‚ùå)"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
grep "–∑–∞–ø—Ä–æ—Å–∏–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ò–ò-—Å–º–µ—Ç—ã" bot.log | wc -l
```

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–°–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª `AI_TESTING_GUIDE.md` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –ò–ò-—Ñ—É–Ω–∫—Ü–∏–π.

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã Makefile

```bash
make help        # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make setup       # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env —Ñ–∞–π–ª)
make build       # –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
make up          # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make down        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
make logs        # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs-bot    # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –±–æ—Ç–∞
make logs-db     # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
make restart     # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
make ps          # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make shell-bot   # –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–æ—Ç–∞
make shell-db    # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
make backup      # –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ë–î
make restore     # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
make clean       # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã + volumes)
make dev         # –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make prod        # –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ
```

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Docker
- Docker 20.10+
- Docker Compose 2.0+

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- Python 3.8+
- aiogram 3.7.0
- asyncpg 0.29.0
- reportlab 4.0.4
- python-dotenv 1.0.0
- gigachat 0.1.17 (–¥–ª—è –ò–ò-—Ñ—É–Ω–∫—Ü–∏–π)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–º–µ—Ç—ã
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
git clone <repository_url>
cd estimate-pro

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
make dev

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env (—É–∫–∞–∂–∏—Ç–µ BOT_TOKEN)
nano .env
# –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
# BOT_TOKEN=your_bot_token_here
# DATABASE_URL=postgresql://bot_user:bot_password@postgres:5432/estimates_db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
make restart

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs
```

## üêõ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### Docker
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
make ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
make restart

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
make clean && make dev
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ë–î

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. 